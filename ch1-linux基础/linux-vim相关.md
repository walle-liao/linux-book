# linux vim 相关

vi 共有三种模式

- 一般模式


- 编辑模式


- 命令模式


### vim 常用命令

#### 撤销、恢复和重复执行上一个命令  
`u` 撤销上一次操作  
`ctrl + r` 恢复上一次操作  
`.` 小数点按键，重复上一个命令  

#### 搜索和替换  
`/commit` 向下搜索 commit 字符串，结合 `Enter + n` 键，在当前匹配结果之后继续向下检索，`N` 则是向上  
`?commit` 向上搜索 commit 字符串，结合 `n / N` 键可以重复检索关键字
`:10,20s/commit/COMMIT/g` 从第10行到第20行，将 commit 字符串替换成 COMMIT 字符串  
`:1,$s/commit/COMMIT/gc` 从第一行到最后一行，将 commit 字符串替换成 COMMIT 字符串，并且在替换之前提示用户确认(confirm)是否需要替换  

#### 删除、复制与粘贴
`dd` 删除一行  
`ndd` n 为数字，向后删除 n 行  
`yy` 复制一行  
`p / P` `p` 为在光标下一行粘贴，`P` 为在光标上一行粘贴  
`x / X` `x` 为向后删除一个字符， `X` 为向前删除一个字符  
`nx` n 为数字，连续向后删除 n 个字符，例如 `10x` 当前光标出向后删除 10 个字符  

#### 移动光标
`G` 移动这个文件到最后一行  
`nG` 移动光标到第 n 行，例如 `20G` 移动到第 20 行（配合 `:set nu` 命令）  
`gg` 移动到这个文件的第一行，相当于 `1G`  
`n + enter` 向下移动 n 行，等效的命令 `5j` 向下移动 5 行   


#### 保存、退出、另存
`:wq` 写入并退出  
`:wq!` 强制写入并退出  
`:q!` 强制离开，不保存修改  
`:w filename` 将修改后的数据保存到另一个(filename)的文件，相当于另存为的功能  
`:n1,n2 w filename` 将 n1 到 n2 行之间的数据保存到另一个文件  
`:r filename` 在光标后面读入另外一个文件，将 filename 文件后的内容读入到光标之后  

#### vim 环境配置
`:set nu` 显示行号  
`:set nonu` 取消行号显示   
